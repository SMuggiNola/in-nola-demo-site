<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" type="image/png" href="../assets/in_logo.png">
  <meta charset="UTF-8">
  <title>Board of Directors | Irish Network NOLA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../global.css">

  <style>
    .page-content h1,
    .page-content > p {
      text-align: left;
    }

    .board-grid {
      display: grid;
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .board-card {
      background: rgba(0, 0, 0, 0.3);
      border: 2px solid var(--gold-primary);
      border-radius: 8px;
      overflow: hidden;
      transition: box-shadow 0.3s, transform 0.3s;
      box-shadow: 0 0 0 1px var(--gold-muted);
    }

    .board-card:hover {
      box-shadow: 0 0 0 2px var(--gold-primary), 0 4px 12px rgba(212, 168, 75, 0.2);
      transform: translateY(-2px);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      padding: 1.5rem;
      cursor: pointer;
      background: rgba(0, 0, 0, 0.2);
    }

    .card-header:hover {
      background: rgba(212, 168, 75, 0.1);
    }

    .member-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid var(--gold-primary);
      flex-shrink: 0;
    }

    .member-initials {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold-muted) 0%, var(--gold-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      font-weight: bold;
      color: #1a1a1a;
      flex-shrink: 0;
      border: 3px solid var(--gold-primary);
    }

    .member-header-info {
      flex: 1;
      text-align: left;
    }

    .member-role {
      font-size: 0.85rem;
      color: var(--gold-primary);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 0.25rem;
      text-align: left;
    }

    .member-name {
      font-size: 1.35rem;
      font-weight: 600;
      color: var(--gold-light);
      margin: 0;
      text-align: left;
    }

    .expand-icon {
      color: var(--gold-muted);
      font-size: 1.5rem;
      transition: transform 0.3s;
    }

    .board-card.expanded .expand-icon {
      transform: rotate(180deg);
    }

    .card-content {
      display: none;
      padding: 1.25rem;
      border-top: 2px solid var(--gold-primary);
      text-align: left;
    }

    .board-card.expanded .card-content {
      display: block;
    }

    .member-email {
      color: var(--gold-primary);
      margin-bottom: 1rem;
      text-align: left;
    }

    .member-email a {
      color: var(--gold-primary);
    }

    .member-bio {
      line-height: 1.7;
      white-space: pre-line;
      text-align: left;
    }

    .edit-link {
      display: inline-block;
      margin-top: 2rem;
      padding: 0.5rem 1rem;
      background: rgba(212, 168, 75, 0.1);
      border: 1px solid var(--gold-muted);
      border-radius: 4px;
      color: var(--gold-light);
      text-decoration: none;
      font-size: 0.9rem;
      transition: background 0.2s, border-color 0.2s;
    }

    .edit-link:hover {
      background: rgba(212, 168, 75, 0.2);
      border-color: var(--gold-primary);
    }

    .loading {
      text-align: center;
      padding: 3rem;
      color: var(--text-muted);
    }

    .loading-spinner {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 3px solid var(--gold-muted);
      border-top-color: var(--gold-primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body>

  <div id="main-header-placeholder"></div>

  <div id="main-content">
    <main class="page-content">

      <h1>Board of Directors</h1>
      <p>Meet the leadership team guiding the mission and work of Irish Network NOLA.</p>

      <!-- Board Members Grid -->
      <div id="board-grid" class="board-grid">
        <div class="loading">
          <div class="loading-spinner"></div>
          <p>Loading board members...</p>
        </div>
      </div>

      <!-- Edit Link for Board Members -->
      <a href="./board-edit.html" class="edit-link">Board Member? Edit Your Profile &rarr;</a>

      <!-- RETURN LINK -->
      <div class="back-link" style="margin-top:2rem;">
        <a href="./index.html">&larr; Return to About IN-NOLA</a>
      </div>

    </main>

    <div id="main-footer-placeholder"></div>
  </div>

  <script src="../js/main.js"></script>

  <script>
    // Fallback data in case API is unavailable
    const fallbackMembers = [
      { id: 'shannon', name: 'Shannon Kelly', role: 'President', email: '', bio: 'Shannon Kelly is a passionate advocate for Irish culture...', photo: '', photoPosition: '50% 50%' },
      { id: 'erin', name: 'Erin Marjorie', role: 'Vice President', email: '', bio: 'Erin is a luxury travel advisor and small business owner...', photo: '', photoPosition: '50% 50%' },
      { id: 'andrew', name: 'Andrew Jones', role: 'Grant Manager', email: '', bio: 'Andrew Jones joined the board of Irish Network New Orleans in 2025...', photo: '', photoPosition: '50% 50%' },
      { id: 'joni', name: 'Joni Muggivan', role: 'Treasurer', email: '', bio: 'A lifelong resident of the Greater New Orleans area...', photo: '', photoPosition: '50% 50%' },
      { id: 'colm', name: 'Colm Kennedy', role: 'Event Coordinator', email: '', bio: 'Details about event planning experience...', photo: '', photoPosition: '50% 50%' },
      { id: 'sean', name: 'Seán Muggivan, LCSW', role: 'Data Manager & AI Strategist', email: 'muggs@muggsofdatasci.net', bio: 'Seán Muggivan, LCSW, is a Licensed Clinical Social Worker...', photo: '', photoPosition: '50% 50%' }
    ];

    function getInitials(name) {
      return name
        .split(' ')
        .map(word => word.charAt(0))
        .join('')
        .substring(0, 2)
        .toUpperCase();
    }

    function renderMember(member) {
      const initials = getInitials(member.name);
      const position = member.photoPosition || '50% 50%';
      const photoHtml = member.photo
        ? `<img src="${member.photo}" alt="${member.name}" class="member-photo" style="object-position: ${position};" onerror="this.outerHTML='<div class=\\'member-initials\\'>${initials}</div>'">`
        : `<div class="member-initials">${initials}</div>`;

      const emailHtml = member.email
        ? `<p class="member-email"><a href="mailto:${member.email}">${member.email}</a></p>`
        : '';

      return `
        <div class="board-card" data-member-id="${member.id}">
          <div class="card-header" onclick="toggleCard('${member.id}')">
            ${photoHtml}
            <div class="member-header-info">
              <div class="member-role">${member.role}</div>
              <h3 class="member-name">${member.name}</h3>
            </div>
            <span class="expand-icon">▼</span>
          </div>
          <div class="card-content">
            ${emailHtml}
            <div class="member-bio">${member.bio}</div>
          </div>
        </div>
      `;
    }

    function toggleCard(memberId) {
      const card = document.querySelector(`[data-member-id="${memberId}"]`);
      if (card) {
        card.classList.toggle('expanded');
      }
    }

    async function loadBoardMembers() {
      const grid = document.getElementById('board-grid');

      try {
        const response = await fetch('/api/board');
        if (!response.ok) throw new Error('API error');

        const data = await response.json();
        const members = data.members || fallbackMembers;

        grid.innerHTML = members.map(renderMember).join('');

      } catch (error) {
        console.log('Could not load from API, using fallback:', error);
        grid.innerHTML = fallbackMembers.map(renderMember).join('');
      }
    }

    // Load on page ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadBoardMembers);
    } else {
      loadBoardMembers();
    }
  </script>

</body>
</html>
